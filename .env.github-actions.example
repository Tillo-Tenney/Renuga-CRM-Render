# GitHub Actions Environment Variables Template
# Copy this file and configure for your deployment

# =============================================================================
# EC2 Instance Configuration
# =============================================================================

# EC2 public IP address or domain name
# Example: 54.123.45.67 or crm.example.com
# Where to find: AWS Console → EC2 → Instances → Your Instance → Public IPv4
EC2_HOST=your_ec2_ip_here

# EC2 SSH username (default for Ubuntu AMI is 'ubuntu')
# Where to find: Depends on AMI used
# - Ubuntu: ubuntu
# - Amazon Linux: ec2-user
# - RHEL: ec2-user
EC2_USER=ubuntu

# =============================================================================
# SSH Authentication
# =============================================================================

# Private SSH key for deployment (add to GitHub Secrets)
# Generate with: ssh-keygen -t ed25519 -C "github-actions" -f ~/.ssh/github_deploy -N ""
# Value: Full content of private key file including BEGIN/END lines
# 
# Example format:
# -----BEGIN OPENSSH PRIVATE KEY-----
# b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
# ... (multiple lines) ...
# -----END OPENSSH PRIVATE KEY-----
#
# IMPORTANT: Add the corresponding public key to EC2 ~/.ssh/authorized_keys
EC2_SSH_PRIVATE_KEY=your_private_key_here

# =============================================================================
# Application Configuration
# =============================================================================

# Backend API URL for frontend build
# Format: http://YOUR_EC2_IP:PORT or https://api.yourdomain.com
# Example: http://54.123.45.67:3001
# Used during frontend build to configure API endpoint
VITE_API_URL=http://your_ec2_ip_here:3001

# =============================================================================
# Optional: Environment-Specific Configuration
# =============================================================================

# If using multiple environments (staging, production), create separate secrets:

# Staging Environment
# EC2_HOST_STAGING=staging.example.com
# EC2_USER_STAGING=ubuntu
# EC2_SSH_PRIVATE_KEY_STAGING=[staging ssh key]
# VITE_API_URL_STAGING=http://staging.example.com:3001

# Production Environment
# EC2_HOST_PRODUCTION=production.example.com
# EC2_USER_PRODUCTION=ubuntu
# EC2_SSH_PRIVATE_KEY_PRODUCTION=[production ssh key]
# VITE_API_URL_PRODUCTION=https://api.example.com

# =============================================================================
# Optional: Notification Configuration
# =============================================================================

# Slack webhook for deployment notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Discord webhook for deployment notifications
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK

# =============================================================================
# Optional: Monitoring and Analytics
# =============================================================================

# Sentry DSN for error tracking
# SENTRY_DSN=https://YOUR_KEY@sentry.io/YOUR_PROJECT

# Datadog API key for monitoring
# DATADOG_API_KEY=your_datadog_api_key

# =============================================================================
# How to Add Secrets to GitHub
# =============================================================================
#
# 1. Go to your GitHub repository
# 2. Click "Settings" tab
# 3. Navigate to "Secrets and variables" → "Actions"
# 4. Click "New repository secret"
# 5. Enter secret name (e.g., EC2_HOST)
# 6. Enter secret value
# 7. Click "Add secret"
# 8. Repeat for all required secrets
#
# Required secrets:
# - EC2_SSH_PRIVATE_KEY
# - EC2_HOST
# - EC2_USER
# - VITE_API_URL
#
# =============================================================================
# Security Best Practices
# =============================================================================
#
# 1. Never commit this file with actual values to git
# 2. Use different SSH keys for staging and production
# 3. Rotate SSH keys every 90 days
# 4. Use GitHub Environments for production protection
# 5. Enable required reviewers for production deployments
# 6. Monitor secret usage in GitHub audit logs
# 7. Use strong, unique secrets for each environment
#
# =============================================================================
# Verification Checklist
# =============================================================================
#
# Before first deployment, verify:
# [ ] EC2 instance is running and accessible
# [ ] Public key is in EC2 ~/.ssh/authorized_keys
# [ ] Security group allows SSH (port 22) from GitHub Actions IPs
# [ ] All required secrets are added to GitHub
# [ ] Workflow file exists at .github/workflows/deploy-ec2.yml
# [ ] Application is already installed on EC2 (or use ec2-setup.sh)
# [ ] Backend is configured and running
# [ ] Database is set up with migrations
#
# =============================================================================
# Troubleshooting
# =============================================================================
#
# If deployment fails:
# 1. Check workflow logs in GitHub Actions tab
# 2. Verify all secrets are correctly configured
# 3. Test SSH connection manually: ssh -i key.pem ubuntu@EC2_IP
# 4. Check EC2 services: pm2 status, systemctl status nginx
# 5. Review application logs on EC2
#
# Common issues:
# - "Permission denied": Check SSH key and authorized_keys
# - "Connection refused": Verify security group and EC2 is running
# - "Health check failed": Backend not running or wrong port
#
# =============================================================================

# Last updated: 2024-12-19
